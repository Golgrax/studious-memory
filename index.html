<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Real-time PAGASA weather alerts and flood advisories for the Philippines. Stay informed about typhoons, floods, and severe weather conditions.">
    <meta name="keywords" content="PAGASA, weather alerts, Philippines, typhoon, flood advisory, disaster preparedness">
    <meta name="author" content="Bayanihan Weather Alert System">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Bayanihan Weather Alert Dashboard">
    <meta property="og:description" content="Real-time PAGASA weather alerts and flood advisories for the Philippines">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/1e40af/ffffff?text=Bayanihan+Weather+Alert">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Bayanihan Weather Alert Dashboard">
    <meta name="twitter:description" content="Real-time PAGASA weather alerts and flood advisories for the Philippines">
    <meta name="twitter:image" content="https://via.placeholder.com/1200x630/1e40af/ffffff?text=Bayanihan+Weather+Alert">
    
    <title>Bayanihan Weather Alert Dashboard | Real-time PAGASA Alerts</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå¶Ô∏è</text></svg>">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
          
    <!-- OpenLayers Map CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.5.0/css/ol.css" type="text/css">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- LeafletJS Map CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <!-- Progressive Web App Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e40af">
</head>
<body>
    <!-- Skip to Content Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">üå¶Ô∏è</div>
            <h1>Bayanihan Weather Alert</h1>
            <div class="loading-spinner"></div>
            <p>Loading weather alerts...</p>
        </div>
    </div>
    
    <!-- Header Section -->
    <header class="header" role="banner">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-img">üå¶Ô∏è</div>
                    <div class="logo-text">
                        <h1 class="site-title">Bayanihan Weather Alert</h1>
                        <p class="site-subtitle">Real-time PAGASA Dashboard</p>
                    </div>
                </div>
                
                <div class="header-status">
                    <div class="status-indicator">
                        <span class="status-dot" id="connection-status"></span>
                        <span class="status-text" id="status-text">Connecting...</span>
                    </div>
                    <div class="last-update">
                        <span class="update-label">Last Update:</span>
                        <time id="last-update-time" datetime="">--:--</time>
                    </div>
                      
                </div>

                <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="dark-mode-toggle">
                        <input type="checkbox" id="dark-mode-toggle" />
                        <span class="slider round"></span>
                    </label>
                </div>    
                
                <nav class="main-nav" role="navigation" aria-label="Main navigation">
                    <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu" id="nav-toggle">
                        <span class="hamburger"></span>
                        <span class="sr-only">Toggle navigation menu</span>
                    </button>
                    <ul class="nav-menu" id="nav-menu">
                        <li><a href="#dashboard" class="nav-link active">Dashboard</a></li>
                        <li><a href="#alerts" class="nav-link">Active Alerts</a></li>
                        <li><a href="#map" class="nav-link">Map View</a></li>
                        <li><a href="#analytics" class="nav-link">Analytics</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main id="main-content" class="main-content" role="main">
        
        <!-- Alert Banner for Critical Alerts -->
        <div class="alert-banner" id="critical-banner" role="alert" aria-live="assertive" style="display: none;">
            <div class="container">
                <div class="banner-content">
                    <div class="banner-icon">‚ö†Ô∏è</div>
                    <div class="banner-text">
                        <strong>Critical Weather Alert:</strong>
                        <span id="critical-message">Severe weather conditions detected in your area.</span>
                    </div>
                    <button class="banner-close" aria-label="Close alert banner" id="banner-close">&times;</button>
                </div>
            </div>
        </div>
        
        <!-- Dashboard Section -->
        <section id="dashboard" class="dashboard-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Weather Alert Dashboard</h2>
                    <p class="section-description">Real-time monitoring of PAGASA weather alerts and flood advisories across the Philippines</p>
                </div>
                
                <!-- Quick Stats -->
                <div class="stats-grid">
                    <!-- ADD THIS NEW CARD -->
                    <div class="stat-card">
                        <div class="stat-icon total">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="total-count">0</div>
                            <div class="stat-label">Total Active Alerts</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon severe">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="severe-count">0</div>
                            <div class="stat-label">Severe Alerts</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon moderate">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="moderate-count">0</div>
                            <div class="stat-label">Moderate Alerts</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon minor">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="minor-count">0</div>
                            <div class="stat-label">Minor Alerts</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon regions">
                            <i class="fas fa-map-marked-alt"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="regions-count">0</div>
                            <div class="stat-label">Affected Regions</div>
                        </div>
                    </div>
                </div>
                
                <!-- Filter Controls -->
                <div class="filter-section">
                    <div class="filter-group">
                        <label for="region-filter" class="filter-label">Filter by Region:</label>
                        <select id="region-filter" class="filter-select">
                            <option value="">All Regions</option>
                            <option value="ncr">National Capital Region (NCR)</option>
                            <option value="car">Cordillera Administrative Region (CAR)</option>
                            <option value="region1">Region 1 (Ilocos Region)</option>
                            <option value="region2">Region 2 (Cagayan Valley)</option>
                            <option value="region3">Region 3 (Central Luzon)</option>
                            <option value="region4a">Region 4-A (CALABARZON)</option>
                            <option value="region4b">Region 4-B (MIMAROPA)</option>
                            <option value="region5">Region 5 (Bicol Region)</option>
                            <option value="region6">Region 6 (Western Visayas)</option>
                            <option value="region7">Region 7 (Central Visayas)</option>
                            <option value="region8">Region 8 (Eastern Visayas)</option>
                            <option value="region9">Region 9 (Zamboanga Peninsula)</option>
                            <option value="region10">Region 10 (Northern Mindanao)</option>
                            <option value="region11">Region 11 (Davao Region)</option>
                            <option value="region12">Region 12 (SOCCSKSARGEN)</option>
                            <option value="region13">Region 13 (Caraga)</option>
                            <option value="barmm">BARMM (Bangsamoro Autonomous Region in Muslim Mindanao)</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="severity-filter" class="filter-label">Filter by Severity:</label>
                        <select id="severity-filter" class="filter-select">
                            <option value="">All Severities</option>
                            <option value="extreme">Extreme</option>
                            <option value="severe">Severe</option>
                            <option value="moderate">Moderate</option>
                            <option value="minor">Minor</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="alert-search" class="filter-label">Search Alerts:</label>
                        <input type="search" id="alert-search" class="filter-input" placeholder="Search by location or alert type...">
                    </div>
                    
                    <button class="filter-reset" id="reset-filters">
                        <i class="fas fa-undo"></i>
                        Reset Filters
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Active Alerts Section -->
        <section id="alerts" class="alerts-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Active Weather Alerts</h2>
                    <div class="section-actions">
                        <button class="refresh-btn" id="refresh-alerts" aria-label="Refresh alerts">
                            <i class="fas fa-sync-alt refresh-icon"></i>
                            Refresh
                        </button>
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="grid" aria-label="Grid view">
                                <i class="fas fa-th"></i>
                            </button>
                            <button class="view-btn" data-view="list" aria-label="List view">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Loading State -->
                <div class="loading-state" id="alerts-loading">
                    <div class="loading-spinner"></div>
                    <p>Loading weather alerts...</p>
                </div>
                
                <!-- No Alerts State -->
                <div class="no-alerts-state" id="no-alerts" style="display: none;">
                    <div class="no-alerts-icon">‚òÄÔ∏è</div>
                    <h3>No Active Weather Alerts</h3>
                    <p>There are currently no active weather alerts for the selected filters. Stay safe and check back regularly for updates.</p>
                </div>
                
                <!-- Alerts Grid -->
                <div class="alerts-grid" id="alerts-container">
                    <!-- Alert cards will be dynamically inserted here -->
                </div>
            </div>
        </section>
        
        <!-- Map Section -->
        <section id="map" class="map-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Interactive Weather Map</h2>
                    <p class="section-description">Geographic visualization of active weather alerts across the Philippines</p>
                </div>
                
                <div class="map-container" id="pagasa-map-container">
                    <iframe
                        id="pagasa-map-iframe"
                        src="/api/map-proxy"
                        title="PAGASA Interactive Weather Map"
                        frameborder="0"
                        scrolling="no"
                        allowfullscreen
                    ></iframe>
                </div>
            </div>
        </section>
        
        <!-- Analytics Section -->
        <section id="analytics" class="analytics-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Weather Analytics</h2>
                    <p class="section-description">Statistical analysis and trends of weather alerts</p>
                </div>
                
                <div class="analytics-grid">
                    <div class="chart-container">
                        <h3 class="chart-title">Alert Frequency by Region</h3>
                        <div class="chart-placeholder" id="region-chart">
                            <canvas id="region-canvas" width="400" height="300"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="chart-title">Severity Distribution</h3>
                        <div class="chart-placeholder" id="severity-chart">
                            <canvas id="severity-canvas" width="400" height="300"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="chart-title">Alert Timeline (24 Hours)</h3>
                        <div class="chart-placeholder" id="timeline-chart">
                            <canvas id="timeline-canvas" width="400" height="300"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="chart-title">Weather Pattern Analysis</h3>
                        <div class="chart-placeholder" id="pattern-chart">
                            <canvas id="pattern-canvas" width="400" height="300"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
    </main>
    
    <!-- Alert Detail Modal -->
    <div class="modal" id="alert-modal" aria-hidden="true" role="dialog" aria-labelledby="modal-title">
        <div class="modal-overlay" id="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">Alert Details</h2>
                <button class="modal-close" id="modal-close" aria-label="Close modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Alert details will be dynamically inserted here -->
            </div>
            <div class="modal-footer">
                <a class="btn btn-secondary" id="modal-pagasa-link" target="_blank">
                    <i class="fas fa-external-link-alt"></i>
                    View on PAGASA
                </a>
                <button class="btn btn-primary" id="modal-close-btn">Close</button>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Bayanihan Weather Alert</h3>
                    <p>Real-time weather alerts and flood advisories from PAGASA to keep Filipino communities safe and informed.</p>
                    <div class="footer-social">
                        <a href="#" class="social-link" aria-label="Facebook">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="#dashboard">Dashboard</a></li>
                        <li><a href="#alerts">Active Alerts</a></li>
                        <li><a href="#map">Map View</a></li>
                        <li><a href="#analytics">Analytics</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul class="footer-links">
                        <li><a href="https://www.pagasa.dost.gov.ph/" target="_blank">PAGASA Official</a></li>
                        <li><a href="https://www.ndrrmc.gov.ph/" target="_blank">NDRRMC</a></li>
                        <li><a href="#" target="_blank">Emergency Contacts</a></li>
                        <li><a href="#" target="_blank">Safety Tips</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>About</h4>
                    <ul class="footer-links">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Bayanihan Weather Alert. Data provided by PAGASA.</p>
                <p>Built with ‚ù§Ô∏è for Filipino communities</p>
            </div>
        </div>
    </footer>
    
          
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- OpenLayers Map Script -->
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.5.0/build/ol.js"></script>

    <!-- Your Application Scripts -->
    <script src="script.js"></script>

    <!-- Back to Top Button -->
    <button id="back-to-top" class="btn btn-primary" title="Go to top"><i class="fas fa-arrow-up"></i></button>
</body>
</html>

